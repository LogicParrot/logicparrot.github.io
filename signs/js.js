function a(){}function b(a,b){if(a.fireEvent)a.fireEvent("on"+b);else{var c=document.createEvent("Events");c.initEvent(b,!0,!1),a.dispatchEvent(c)}}function c(){b(document.getElementById("menu2_button"),"click")}function d(){}function e(){}var f,g;!function(){var a={};f=function(b){return a[b]},g=function(b,c){a[b]=c}}(),function(){function a(a){this.g=a}function b(b){var c=document.getElementById(b);return void 0==h[b]&&(h[b]=new a(c)),h[b]}function c(b){return new a(document.createElement(b))}function d(b){return new a(document.createTextNode(b))}function e(){return new a(document.createDocumentFragment())}var f={};g("DomWrapper",f),a.prototype={id:function(a){return this.g.id=a,this},class:function(a){return this.g.className=a,this},h:function(a){return this.i(a),this.g.className=this.g.className+" "+a,this},i:function(a){return this.g.className=this.g.className.replace(a,"").trim(),this},remove:function(a){var b=this.g;b.parentNode.removeChild(b)},hide:function(){return this.j(),this.g.className=this.g.className+" hidden",this},k:function(){return this.g.style.display="none",this},display:function(){this.g.style.display="initial"},j:function(){return this.g.className=this.g.className.replace("hidden","").trim(),this},raw:function(){return this.g},append:function(a){return this.g.appendChild(a.raw()),this},l:function(a){return this.g.innerHTML=a,this},m:function(a){return this.append(d(a)),this},c:function(a){var b=c(a);return this.append(b),b},clear:function(){return this.g.innerHTML="",this},click:function(a){return this.g.onclick=a,this}};var h={};f.e=b,f.c=c,f.o=e,f.text=d}();var h=f("DomWrapper").e,i=f("DomWrapper").c,j=f("DomWrapper").o;!function(){var a={};g("DataParser",a),a.p=function(a,b,c){function d(a){a.preventDefault()}function e(b){a.removeEventListener("drop",e),a.removeEventListener("dragover",d),b.stopPropagation(),b.preventDefault();var c=b.dataTransfer.files;if(1!=c.length)return a.addEventListener("drop",e,!1),a.addEventListener("dragover",d,!1),void alert("please drop ONE file");var f,i;for(f=0,i=c[f];f!=c.length;++f){var j=new FileReader;j.onload=function(a){var b=a.target.result,c=g(b);h(c)},j.readAsText(i)}}function f(a,b,c,d){function e(){f.abort(),c()}var f=new XMLHttpRequest;f.open("GET",a,!0),f.onreadystatechange=function(){4==f.readyState&&(clearTimeout(g),200==f.status?b(f.responseText):c())},f.send();var g=setTimeout(e,d)}function g(a){for(var b=a.replace("\r\n","\n").replace("\r","\n").toLowerCase().split("\n"),c=0;c<b.length;++c){b[c]=b[c].split("\t");for(var d=0;d<b[c].length;++d)b[c][d]=b[c][d].trim()}return b}function h(a){function d(b,c){return void 0==a[c]?"":void 0==a[c][b]?"":a[c][b]}var e,f,g;for(g=0;g<20;++g){var h=d(g,0);if(h.indexOf("begin time")==-1&&h.indexOf("end time")==-1&&h.indexOf("duration -")==-1)break;"begin time - ss.msec"==h?e=g:"end time - ss.msec"==h&&(f=g)}if(void 0==e)return console.log("dataParser: xBegin not found"),void c();if(void 0==f)return console.log("dataParser: xEnd not found"),void c();for(var i=[];;){var h=d(g,0);if(""==h)break;i.push({x:g,name:h}),++g}for(var j={},k=0;k<i.length;++k){var l=i[k];j[l.name]=[]}for(var m=1;;){var n=d(e,m);if(""==n)break;for(var o=d(f,m),k=0;k<i.length;++k){n=Number(n),o=Number(o);var l=i[k],p=d(l.x,m);""!=p&&j[l.name].push({s:n,end:o,name:p})}m+=1}b(j)}this.q=function(b){a.removeEventListener("drop",e),a.removeEventListener("dragover",d),f(b,function(a){var b=g(a);h(b)},function(){alert("Something went wrong while retreving sample input"),location.reload()},9e3)},a.addEventListener("drop",e,!1),a.addEventListener("dragover",d,!1)}}(),function(){var a={};g("DomRenderer",a),a.t=function(){h("menu1_button").j().raw().onclick=function(){location.reload()},h("menu1_message").l("File Loaded :)"),h("menu1").class("menu1_mini")},a.u=function(a){h("menu2_body").clear().m("Please wait..."),scroll(0,0),setTimeout(function(){a(),scroll(0,0)},5)},a.v=function(){h("menu2").j()},a.A=function(a){var b=h("menu2_sub"+a).h("setupProgress_current").raw().innerHTML;h("menu2_title").clear().m(b)}}(),function(){function b(b,d,e){function f(){d&&u(g,"");for(var b=0,j=0;j<e;++j){var k=c(g,4,n);a("Alignments this iteration: ",k);for(var m=0;m<k.length;++m){var o=k[m],p=[];o.sort();for(var q=0;q<o.length;++q){var r=g[o[q]];p.push(r.name),o[q]=r.B[r.C]}if(hashName=p.join("_"),void 0==w[hashName]){var s={D:p,F:[]};w[hashName]=s,y.push(s)}w[hashName].F.push(o)}for(var t=-1,q=0;q<g.length;++q){var v=g[q];if(v.C!=-1){var x=g[t];v.C<v.B.length-1&&(t==-1||v.B[v.C].s<x.B[x.C].s)&&(t=q)}}if(t==-1){b=1;break}g[t].C++,n=t}0==b?d?(u(g,"yellow"),h(g[n].name+"_"+g[n].C).class("green"),setTimeout(f,200)):setTimeout(f,10):setTimeout(function(){l(w,y,i)},10)}var g=[],i=[];a("Columns: ",b);for(var k in b)if(b.hasOwnProperty(k)){var m=0;0==b[k].length&&(m=-1),b[k].sort(function(a,b){return a.s-b.s}),g.push({B:b[k],C:m,name:k}),i.push(k)}for(x=0;x<g.length;++x)g[x].C!=-1;var n=-1;if(a("col: ",g),d){for(var o=j(),p=o.c("table").class("borderedTable"),q=p.c("tr"),r=0;r<g.length;++r){var s=g[r];s.C!=-1&&q.c("td").c("b").m(s.name)}for(var r=0;r<500;++r){q=p.c("tr");for(var t=0;t<g.length;++t){var s=g[t];if(s.C!=-1){var v=s.B[r];if(void 0==v)q.c("td");else{q.c("td").id(s.name+"_"+r).m(v.name+" - "+v.s+","+v.end)}}}}h("menu3").clear().append(o),u(g,"yellow")}var w={},y=[];setTimeout(f,10)}function c(a,b,c){var d=[],f=[];return c!=-1&&(f.push(c),b--),e(a,d,f,c,b,-1),d}function d(a,b){void 0==b&&(b=0);for(var c="",d=0;d<a.length+b;++d)c+="A____";return c}function e(b,c,g,h,i,j){if(a(d(g),"Recursion start: ",g),0!=i){for(j+=1;j<b.length;++j)a(d(g),"Trying: ",j,b[j].name),b[j].C!=-1&&j!=h&&(g.push(j),f(b,g)&&(g.length>1&&(c.push(g.slice()),a(d(g,-1),"Sol: ",g)),e(b,c,g,h,i-1,j)),g.pop());a(d(g),"Recursion end")}}function f(b,c){if(0==c.length&&alert("process1.js WEIRD LENGTH. report to safwat"),1==c.length)return!0;for(var e=b[c[c.length-1]],f=0;f<c.length-1;++f){var g=b[c[f]];if(a(d(c,-1),"comparing ",g.B[g.C],e.B[e.C]),!k(g.B[g.C],e.B[e.C]))return a(d(c,-1),"fail "),!1}return a(d(c),"paired "),!0}function k(a,b){if("51.466"==a.s&&"51.466"==b.s?debug=1:debug=0,a.end<b.s)return!1;if(a.s>b.end)return!1;var c=Math.max(b.end-b.s-Math.max(b.end-a.end,0)-Math.max(a.s-b.s,0),0);return Math.max(c/(b.end-b.s),c/(a.end-a.s))>=.8}function l(a,b,c){for(var d={G:{F:0,H:0,I:0,J:0},K:[]},e=0;e<b.length;++e){var f=b[e],g=f.D,i=g.length,j=f.F;f.L={H:0,I:0,J:0},void 0==d.K[i]&&(d.K[i]={F:0,H:0,I:0,J:0,M:0});for(var k=d.K[i],l=0;l<j.length;++l){alignment=j[l];for(var n={},o=0;o<g.length;++o)for(var p=(g[o],alignment[o]),q=0;q<p.N.length;++q){var s=p.N[q];void 0==n[s]?n[s]=1:n[s]+=1}var t=0;for(func in n)n.hasOwnProperty(func)&&n[func]>t&&(t=n[func]);t==g.length?(alignment.O="full",f.L.H+=1):1==t?(alignment.O="none",f.L.J+=1):(alignment.O="part",f.L.I+=1)}d.G.H+=f.L.H,d.G.J+=f.L.J,d.G.I+=f.L.I,d.G.F+=f.F.length,k.H+=f.L.H,k.J+=f.L.J,k.I+=f.L.I,k.F+=f.F.length,k.M+=1}setTimeout(function(){h("menu2").remove(),r(a,b,c,d,m,0)},10)}function m(a,b){return b.F.length-a.F.length}function n(a,b){return b.L.H-a.L.H}function o(a,b){return b.L.I-a.L.I}function p(a,b){return b.L.J-a.L.J}function q(a){var b,c,d=document.body;if(document.createRange&&window.getSelection){b=document.createRange(),c=window.getSelection(),c.removeAllRanges();try{b.selectNodeContents(a),c.addRange(b)}catch(d){b.selectNode(a),c.addRange(b)}}else d.createTextRange&&(b=d.createTextRange(),b.moveToElementText(a),b.select())}function r(a,b,c,d,e,f){b.sort(e),h("menu3").clear(),h("menu1_message").clear().m("Analyses results");var g=s(a,b,d),k=j(),l=k.c("table").id("mainContentTable").class("borderedTable");if(f>=0){var u=l.c("tr");u.c("td").c("b").m("Alignments"),u.c("td").c("b").m("Full matches"),u.c("td").c("b").m("Partial matches"),u.c("td").c("b").m("No matches");for(var v=0;v<b.length;++v){var w=b[v];if(0==f||w.D.length==f){u=l.c("tr").class("alignmentGroup"),u.c("td").m(w.F.length),u.c("td").m(w.L.H).class("functionMatch_full"),u.c("td").m(w.L.I).class("functionMatch_partial"),u.c("td").m(w.L.J).class("functionMatch_none");for(var x=0;x<w.D.length;++x)u.c("td").m(w.D[x]);u.click(function(a){return function(){t(a),h("menu3").k()}}(w))}}}else{var y,z,A,u=l.c("tr");switch(f){case-1:A="Alignments";break;case-2:A="Full matches";break;case-3:A="Partial matches";break;case-4:A="no Matches"}for(u.c("td").m(A),y=0;y<c.length;++y)u.c("td").c("b").m(c[y]);for(z=0;z<c.length-1;++z)for(u=l.c("tr"),u.c("td").c("b").m(c[z]),y=0;y<c.length;++y)if(y<z+1)u.c("td").m("---");else{var w=a[c[z]+"_"+c[y]];if(void 0==w)u.c("td").m("0");else{var B;switch(f){case-1:B=w.F.length;break;case-2:B=w.L.H;break;case-3:B=w.L.I;break;case-4:B=w.L.J}u.c("td").m(B).class("alignmentGroup").click(function(a){return function(){t(a),h("menu3").k()}}(w))}}}var C=i("div").m("Here are the results. Click on an alignment group for fine grained info"),D=i("div");D.m("Sort by: ");var E=D.c("button").m("Total alignments").id("sortTotal").click(function(){r(a,b,c,d,m,f)}),F=D.c("button").m("Full matches").id("sortFull").click(function(){r(a,b,c,d,n,f)}),G=D.c("button").m("Partial matches").id("sortPart").click(function(){r(a,b,c,d,o,f)}),H=D.c("button").m("None matches").id("sortNone").click(function(){r(a,b,c,d,p,f)}),I=i("div");I.m("Rank filter: ");var J=I.c("button").m("Show all").click(function(){r(a,b,c,d,e,0)}),K=I.c("button").m("4").click(function(){r(a,b,c,d,e,4)}),L=I.c("button").m("3").click(function(){r(a,b,c,d,e,3)}),M=I.c("button").m("2").click(function(){r(a,b,c,d,e,2)}),N=I.c("button").m("2 - Grid view - alignments").click(function(){r(a,b,c,d,e,-1)}),O=I.c("button").m("2 - Grid view - full matches").click(function(){r(a,b,c,d,e,-2)}),P=I.c("button").m("2 - Grid view - no matches").click(function(){r(a,b,c,d,e,-4)}),Q=i("div");Q.c("button").m("Select all (for export)").click(function(){q(document.getElementById("mainContentTable"))}),Q.m(" After selection, you can copy-paste the table into Excel."),h("menu3").append(g).append(C).append(D).append(I).append(Q).append(k),f<0?(E.raw().disabled="disabled",F.raw().disabled="disabled",G.raw().disabled="disabled",H.raw().disabled="disabled"):(e==m&&(E.raw().disabled="disabled"),e==n&&(F.raw().disabled="disabled"),e==o&&(G.raw().disabled="disabled"),e==p&&(H.raw().disabled="disabled")),0==f&&(J.raw().disabled="disabled"),4==f&&(K.raw().disabled="disabled"),3==f&&(L.raw().disabled="disabled"),2==f&&(M.raw().disabled="disabled"),f==-1&&(N.raw().disabled="disabled"),f==-2&&(O.raw().disabled="disabled"),f==-4&&(P.raw().disabled="disabled")}function s(a,b,c){var d=i("div").class("grayMenu");d.c("div").class("miniTitle").m("Global statistics");var e=d.c("table").class("borderedTable"),f=e.c("tr");f.c("td").m("Rank"),f.c("td").m("Total alignments"),f.c("td").m("Total full matches").class("functionMatch_full"),f.c("td").m("Total partial matches").class("functionMatch_partial"),f.c("td").m("Total none matches").class("functionMatch_none"),f.c("td").m("Total alignment groups with this rank");for(var g=2;g<c.K.length;++g){var h=c.K[g];void 0!=h?(f=e.c("tr"),f.c("td").m(g),f.c("td").m(h.F),f.c("td").m(h.H),f.c("td").m(h.I),f.c("td").m(h.J),f.c("td").m(h.M)):console.log("INFO - No groups of rank ",g)}return f=e.c("tr"),f.c("td").c("b").m("All ranks"),f.c("td").c("b").m(c.G.F),f.c("td").c("b").m(c.G.H),f.c("td").c("b").m(c.G.I),f.c("td").c("b").m(c.G.J),f.c("td").c("b").m(b.length),d}function t(a){h("menu4").clear();var b=a.D,c=a.F,d=j();d.c("div").class("bigTitle").m("Alignment list");var e=i("div").class("grayMenu");e.c("div").class("miniTitle").m("Statistics"),d.c("div").c("button").m("Go back").click(function(){h("menu4").clear(),h("menu3").display()});for(var f=0;f<c.length;++f){alignment=c[f];var g=d.c("table").class("borderedTable"),k=g.c("tr"),l=k.c("td");l.raw().rowSpan=b.length+1,l.c("b").m(f+1),k.c("td").c("b").m("Tier"),k.c("td").c("b").m("Movement"),k.c("td").c("b").m("Function"),k.c("td").c("b").m("Time");for(var m=0;m<b.length;++m){var n=b[m],o=alignment[m];k=g.c("tr"),k.c("td").m(n),k.c("td").m(o.name);for(var p=o.N[0],q=0;q<o.N.length;++q){var r=o.N[q];0!=q&&(p+=" + "+r)}k.c("td").m(p),k.c("td").m(v(o.s)+" - "+v(o.end))}var s=g.c("tr").c("td");s.raw().colSpan=3;"full"==alignment.O?s.m("Full function match").class("functionMatch_full"):"none"==alignment.O?s.m("No function match").class("functionMatch_none"):s.m("Partial function match").class("functionMatch_partial"),d.m("---")}var g=e.c("table").class("borderedTable"),k=g.c("tr");k.c("td").m("Full matches").class("functionMatch_full"),k.c("td").m(a.L.H),k=g.c("tr"),k.c("td").m("Partial matches").class("functionMatch_partial"),k.c("td").m(a.L.I),k=g.c("tr"),k.c("td").m("No matches").class("functionMatch_none"),k.c("td").m(a.L.J),k=g.c("tr"),k.c("td").m("Total alignments"),k.c("td").m(c.length),h("menu4").append(e).append(d),setTimeout(function(){scroll(0,0)},200)}function u(a,b){for(var c=0;c<a.length;++c){var d=a[c];d.C!=-1&&d.C!=d.B.length&&h(d.name+"_"+d.C).class(b)}}function v(a){var b=Math.floor(Math.floor(a)/60),c=a-60*b;return b<10&&(b="0"+b),b+":"+c.toFixed(3)}var w={};g("Process1",w);var x;w.start=function(a){h("menu2").clear().c("h1").m("Crunching numbers, please wait..."),setTimeout(function(){b(a,0,1e3)},50)}}(),function(){function a(a){var e=b(a),f=e.hash,g=e.P;c(g,f,function(){k.u(function(){d(a,f),l.start(a)})})}function b(a){var b={},c=[];for(var d in a)if(a.hasOwnProperty(d))for(var e=a[d],f=0;f<e.length;++f){e[f].N=e[f].N.split(/[\+\/]/);for(var g=0;g<e[f].N.length;++g){e[f].N[g]=e[f].N[g].trim();var h=e[f].N[g];void 0==b[h]&&(b[h]=h,c.push(h))}}return c.sort(),{P:c,hash:b}}function c(a,b,c){function d(a,c){var e=this;e.next=null,e.S=c,null!=e.S&&(e.next=e.S.next,e.S.next=e),null!=e.next&&(e.next.S=e),e.T=a,e.U=!1,e.R=i("li").class("selectableListItem"),e.R.c("b").m(this.T[0]),e.R.click(function(){return m?void(e.U?e.V(!1):e.V(!0)):void(null==f?(f=e,e.R.class("selectableListItem_selected")):(f==e?e.W():e.X(f),f=null))}),null==e.next?o.append(e.R):o.raw().insertBefore(e.R.raw(),e.next.R.raw()),this.X=function(a){this.T=e.T.concat(a.T);for(var c=e.T[0],d=0;d<e.T.length;++d)void 0==b[e.T[d]]?console.log("WARNINGGG"):b[e.T[d]]=c;e.R.m(", ").m(a.T.join(", ")),a.U&&e.V(!0),a.Y()},this.W=function(){for(var a=e,c=0;c<this.T.length;++c)b[e.T[c]]=e.T[c],a=new d([e.T[c]],a);e.Y()},this.Y=function(){o.raw().removeChild(e.R.raw()),null==e.S?n=e.next:e.S.next=e.next,null!=e.next&&(e.next.S=e.S)},this.V=function(a){1==a?(e.U=!0,e.R.h("selectableListItem_ignored")):(e.U=!1,e.R.i("selectableListItem_ignored"))}}function e(){for(var a=n;null!=a;)a.V(!a.U),a=a.next}var f=null,g=j();g.c("div").m("Please mark any identical functions by clicking on one of them and then the other. This can be done repeatedly. The text that will be used in the output is the bold text."),g.c("div").m('* When a function is "X + Y" or "X / Y",X and Y are assumed to be two seperate functions.'),g.c("div").m("* Double-click to split functions");var k=g.c("input");k.raw().type="checkbox",g.m("Mark this checkbox to ignore functions");var l=g.c("button").m("Invert"),m=!1;k.click(function(){m=!!k.raw().checked,null!=f&&(f.R.i("selectableListItem_selected"),f=null)}),l.click(e);var n,o=g.c("ul");n=new d([a[0]],null);for(var p=n,q=1;q<a.length;++q)p=new d([a[q]],p);h("menu2_body").clear().append(g),h("menu2_button").click(function(){for(var a=n;null!=a;){if(1==a.U)for(var d=0;d<a.T.length;++d)console.log("INFO - Ignoring function: ",a.T[d]),b[a.T[d]]="";a=a.next}c()})}function d(a,b){for(var c in a){var d=[];if(a.hasOwnProperty(c)){for(var e=a[c],f=0;f<e.length;++f){59.74==e[f].s&&console.log("GOTCHA ",e[f],e[f].N);for(var g=e[f].N,h=0;h<g.length;++h)void 0==b[g[h]]&&console.log("INTERNAL ERROR stage4.js AHC0124",g[h]),g[h]=b[g[h]],""==g[h]&&g.splice(h--,1);g.length>0&&d.push(e[f])}a[c]=d}}}var e={};g("Stage4",e);var k=f("DomRenderer"),l=f("Process1");DELME=0,e.start=function(b){k.A(5),k.u(function(){a(b)})}}(),function(){function a(a,c){d.A(3);var e=j();e.c("div").m("Pairing has been completed, and movements were validated for correctness. Validation results below.");var f=e.c("table").class("borderedTable"),g=f.c("tr");g.c("td").c("b").m("Tier"),g.c("td").c("b").m("Total movements excluding errors"),g.c("td").c("b").m("Validated movements"),g.c("td").c("b").m("Ignore / NF"),g.c("td").c("b").m("Errors");for(var i=[],k=0,l=0,m=0,n=0;n<c.length;++n){for(var o=c[n].Z,p=c[n].$,q=a[o],r=a[p],s=0,t=0,u=0,v=0,w=[];s<q.length&&t<r.length;){var x=q[s],y=r[t];if(x.s==y.s&&x.end==y.end){if(s++,t++,"nf"==x.name||"ignore"==x.name||"nf"==y.name||"ignore"==y.name){console.log("INFO - ignored movement:",x,y),v++,m++;continue}l+=1,x.N=y.name,w.push(x)}else console.log("WARNING - merge failed:",x,y),u++,x.s<y.s?(x._=o,i.push(x),s++):(y._=p,i.push(y),t++)}for(;s<q.length;++s){u++;var z=q.splice(s,1)[0];s--,z._=o,console.log("WARNING - tier excess:",z),i.push(z)}for(;t<r.length;++t){u++;var z=r.splice(t,1)[0];t--,z._=p,console.log("WARNING - func excess:",z),i.push(z)}k+=w.length+v,0===u&&(u=""),g=f.c("tr"),g.c("td").m(o),g.c("td").m(w.length+v),g.c("td").m(w.length),g.c("td").m(v),g.c("td").c("b").m(u),a[o]=w,delete a[p]}if(g=f.c("tr"),g.c("td").c("b").m("Total"),g.c("td").m(k),g.c("td").m(l),g.c("td").m(m),g.c("td").c("b").m(i.length),0!=i.length){e.c("div").class("miniTitle").m("Errors"),e.c("div").m("The following movements had either no function or no direction/tier entry. The program has ignored and discarded them.");var f=e.c("table").class("borderedTable"),g=f.c("tr");g.c("td").c("b").m("Column"),g.c("td").c("b").m("Begin time"),g.c("td").c("b").m("End time"),g.c("td").c("b").m("Cell contents");var n;for(n=0;n<50&&n<i.length;++n){var A=i[n];g=f.c("tr"),g.c("td").m(A._),g.c("td").m(A.s),g.c("td").m(A.end),g.c("td").m(A.name)}e.c("div").class("miniTitle").m("Total movements discarded: "+i.length),i.length>50&&e.c("div").m("Only the first 50 errors were displayed.")}h("menu2_body").clear().append(e),h("menu2_button").click(function(){d.u(function(){b(a)})})}function b(a){d.A(4);var b=j();b.c("div").m("Some of the tiers will now be split based on movement direction."),b.c("div").m("The program splits based on the existence of a slash character in the tier name."),b.c("div").m("Tiers without slash in their name are not split"),b.c("div").m("Please make sure the program is splitting the tiers properly."),b.c("div").class("miniTitle").m("Tier splitting");var c=b.c("table").class("borderedTable"),f=c.c("tr");f.c("td").c("b").m("Original tier name"),f.c("td").c("b").m("Movements"),f.c("td").c("b").m("Split 1 name"),f.c("td").c("b").m("Split 1 movements"),f.c("td").c("b").m("Split 1 direction"),f.c("td").c("b").m("Split 2 name"),f.c("td").c("b").m("Split 2 movements"),f.c("td").c("b").m("Split 2 direction"),f.c("td").c("b").m("Errors");var g=0,i=[];for(var k in a)if(a.hasOwnProperty(k))if(g++,f=c.c("tr"),f.c("td").m(k),f.c("td").m(a[k].length),k.indexOf("/")!=-1){for(var l,m,n=k.split(" "),o=0;o<n.length;++o)if(n[o].indexOf("/")!=-1){m=n[o],l=o;break}var p=m.split("/"),q=[];n.splice(l,1,p[0]),q[0]=n.join(" "),n.splice(l,1,p[1]),q[1]=n.join(" "),i.push({aa:k,ba:q,direction:p,ca:f})}else for(var o=0;o<7;++o)f.c("td").c("div").class("center").m("---");b.c("div").class("miniTitle").m("Total tiers prior to split: "+g);for(var r=[],o=0;o<i.length;++o){var s=0,t=i[o],u=t.ca,v=a[t.aa],w=[],x=[];a[t.ba[0]]=w,a[t.ba[1]]=x;for(var y=0;y<v.length;++y){var z=v[y];z.name=z.name.replace(" x",""),z.name==t.direction[0]?w.push(z):z.name==t.direction[1]?x.push(z):(s++,z._=t.aa,z.da=t.direction[0],z.ea=t.direction[1],r.push(z),console.log("ERR",z))}delete a[t.aa],u.c("td").m(t.ba[0]),u.c("td").m(w.length),u.c("td").m(t.direction[0]),u.c("td").m(t.ba[1]),u.c("td").m(x.length),u.c("td").m(t.direction[1]),u.c("td").m(s)}if(b.c("div").class("miniTitle").m("Total tiers after split: "+(g+i.length)),0!=r.length){b.c("div").class("miniTitle").m("Errors:"),b.c("div").m("Some articulations had invalid directions and were discarded"),c=b.c("table").class("borderedTable"),f=c.c("tr"),f.c("td").c("b").m("Column"),f.c("td").c("b").m("Begin time"),f.c("td").c("b").m("End time"),f.c("td").c("b").m("Cell contents"),f.c("td").c("b").m("Expected contents");for(var o=0;o<r.length&&o<50;++o){var z=r[o];f=c.c("tr"),f.c("td").m(z._),f.c("td").m(z.s),f.c("td").m(z.end),f.c("td").m(z.name),f.c("td").m(z.da+" OR "+z.ea)}b.c("div").class("miniTitle").m("Total errors: "+r.length),r.length>50&&b.c("div").m("Only the first 50 errors were displayed.")}b.c("div").m('*If a cell has "<direction> x", the x character is ignored and the direction is treated as "<direction>"'),h("menu2_body").clear().append(b),h("menu2_button").click(function(){e.start(a)})}var c={};g("Stage3",c);var d=f("DomRenderer"),e=f("Stage4");c.start=function(b,c){d.u(function(){a(b,c)})}}(),function(){function a(a){h("menu2_button").raw().disabled=!1,h("mainMenuLink").remove(),null!=document.getElementById("menu1_sample_button")&&h("menu1_sample_button").remove(),e.t(),e.v(),e.A(1);var c=j();c.c("div").m("These are all the columns imported from the file you dragged, and the number of movements each one has.");var f=c.c("table"),g=0;for(var i in a)if(a.hasOwnProperty(i)){++g;var k=f.c("tr");k.c("td").c("b").m(i),k.c("td").m(" - "+a[i].length+" movements");k.c("td")}c.c("div").class("miniTitle").m("Total raw columns: "+g),h("menu2_body").append(c),h("menu2_button").click(function(){e.u(function(){b(a)})}),d()}function b(a){function b(a){return void 0!=f[a]&&(m.push({$:n,Z:a}),delete c[n],delete f[a],i--,d--,!0)}e.A(2),h("menu2_body").clear();var c={},d=0,f={},i=0;for(var k in a)if(a.hasOwnProperty(k)){if(void 0!=c[k]){var l=h("menu2_body").m("Duplicate columns detected. Both are named: ");return l.c("br"),void l.c("b").m(k)}k.indexOf("function")!=-1?(c[k]=1,d++):(f[k]=1,i++)}var m=[];for(var n in c){var o=n.substring(0,n.indexOf("function")-1).trim();if(!b(o)){var p=o.replace("decided -","").replace("decided","").trim();o!=p&&console.log(o,">>>",p),!b(p)}}var q=0;if(0!=d){var l=h("menu2_body").c("div");l.c("b").m("I couldn't match the following functions:");for(var r in c){var o=r.substring(0,r.indexOf("function")-1).trim(),p=o.replace("decided -","").replace("decided","").trim(),s="";o!=p&&(s=' or "'+p+'"'),l.c("br"),l.c("b").m(r),l.m(' - There is no column named "'+o+'"'+s)}q=1}if(0!=i){var l=h("menu2_body").c("div");l.c("b").m("I couldn't match the following columns:");for(var r in f)l.c("br"),l.c("b").m(r);q=1}if(!q){var t=j();t.c("div").m("The program will now pair and merge the following columns. Please make sure the pairing is correct.");var u=t.c("table").class("borderedTable"),v=u.c("tr");v.c("td").c("b").m("Tier name"),v.c("td").c("b").m("Function name");for(var w=0;w<m.length;++w){var v=u.c("tr");v.c("td").m(m[w].Z),v.c("td").m(m[w].$)}t.c("div").class("miniTitle").m("Total tiers: "+m.length),h("menu2_body").append(t),h("menu2_button").click(function(){g.start(a,m)})}}var c=f("DataParser"),e=f("DomRenderer"),g=f("Stage3");c.p(document.getElementById("menu1"),function(b){setTimeout(function(){a(b)},50)},function(){alert("Error parsing file")}),h("menu1_sample_button").click(function(){h("menu1_sample_button").remove(),h("menu1_message").clear().m("Please wait..."),c.q("/signs/sample.txt")})}();var k;
