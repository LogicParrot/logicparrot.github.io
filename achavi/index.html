<!doctype html><html><head>

<meta charset="utf-8"/>
<title>Achavi changeset analysis</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1">
<style>body{margin:1em auto;max-width:40em;padding:0 1em;font:1.2em/1.6em sans-serif;text-align: center;}</style>

</head><body onload="init()">

<div>
	Please enter an <a href="https://www.openstreetmap.org/about">OpenStreetMap</a>
	changeset ID or URL to analyze it with <a href="https://wiki.openstreetmap.org/wiki/Achavi">Achavi</a>
</div>

<div>
	<input type="text" id="in"/>
	<button id="but">Analyze</button>
</div>

<div style="color: #F00;" id="out"></div>

<div style="margin-top: 2em; display: inline-block;">... You can also use this <a href="https://en.wikipedia.org/wiki/Bookmarklet">bookmarklet</a>:

<div style="background-color: #DDD; font-family: monospace; text-align: left;">
javascript:(function()%20{window.location=window.location.toString().replace(/.*\/changeset\/([0-9]+).*/,'https\:\/\/overpass\-api\.de\/achavi\/?changeset\=$1');})()
</div>

Drag and drop <a href="javascript:(function()%20{window.location=window.location.toString().replace(/.*\/changeset\/([0-9]+).*/,'https\:\/\/overpass\-api\.de\/achavi\/?changeset\=$1');})() ">this link</a> to your bookmark bar to install it. Some browsers also allow right-clicking the link, then clicking "bookmark this link".

</div>

<script>
var elIn, elOut, elButton;
function init()
{
	elIn=document.getElementById("in");
	elOut=document.getElementById("out");
	elButton=document.getElementById("but");
	but.onclick = run;
}

function run()
{
	var changeset = elIn.value;
	if (isNaN(changeset))
	{
		changeset = changeset.replace(/https?\:\/\/www.openstreetmap.org\/changeset\/([0-9]+)(\#.*)?/, "$1");
	}
	if (isNaN(changeset))
	{
		message("Not a valid changeset Id");
	}
	else window.location = 'https://overpass-api.de/achavi/?changeset=' + changeset; 
}

function message(str)
{
	elOut.innerHTML = str;
}
</script>
</body></html>

